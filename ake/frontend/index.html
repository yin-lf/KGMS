<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>知识图谱管理信息系统</title>
  <link rel="stylesheet" href="css/style.css"> <!-- 样式表 -->
  <link rel="stylesheet" href="css/auth.css"> <!-- 登录界面 -->
  <link rel="stylesheet" href="recommendation.css"> <!-- 推荐界面 -->
</head>
<body>
  <!-- 登录状态栏 -->
  <div id="authBar" class="auth-bar">
    <span id="userInfo">未登录</span>
    <button onclick="Auth.showLoginModal()">登录</button>
    <button onclick="Auth.logout()" style="display:none;">退出</button>
  </div>

  <!-- 登录模态框 -->
  <div id="loginModal" class="modal hidden">
      <div class="modal-content">
          <h3>用户登录</h3>
          <input type="text" id="usernameInput" placeholder="请输入用户名">
          <div class="modal-actions">
              <button onclick="Auth.login()">登录</button>
              <button onclick="Auth.hideLoginModal()">取消</button>
          </div>
      </div>
  </div>

  <!-- 主要内容 -->
  <div class="container">
    <header>
      <h1>知识图谱管理信息系统</h1>
      <nav>
        <button onclick="showSection('query')">查询</button>
        <button onclick="showSection('add')">新增</button>
        <button onclick="showSection('modify')">修改</button>
        <button onclick="showSection('delete')">删除</button>
        <button onclick="showSection('recommend')">推荐</button>
      </nav>
    </header>

      <!-- 查询模块 -->
      <section id="query" class="page">
        <h2>🔍 查询知识图谱</h2>
        <input id="queryInput" type="text" placeholder="输入作者名/论文ID/分类名">
        <button onclick="search()">查询</button>
        <pre id="queryResult"></pre>
      </section>

      <!-- 新增模块 -->
      <section id="add" class="page hidden">
        <h2>➕ 新增数据</h2>

        <!-- 新增论文 -->
        <div class="form">
          <h3>新增论文</h3>
          <input id="paperId" placeholder="论文ID">
          <input id="paperTitle" placeholder="论文标题">
          <textarea id="paperAbstract" placeholder="论文摘要"></textarea>
        </div>

        <!-- 论文作者 -->
        <div class="form">
          <h3>论文作者</h3>
          <div id="authorsList">
            <input class="paperAuthor" placeholder="作者姓名">
          </div>
          <button type="button" onclick="addAuthorField()">+ 添加作者</button>
        </div>

        <!-- 论文分类 -->
        <div class="form">
          <h3>论文分类</h3>
          <input id="paperCategory" placeholder="分类名称">
        </div>

        <!-- 提交按钮 -->
        <button onclick="submitPaper()">提交论文</button>
        <pre id="addResult"></pre>
      </section>

      <!-- 修改模块 -->
      <section id="modify" class="page hidden">
        <h2>✏️ 修改数据</h2>

        <!-- 更新作者 -->
        <div class="form">
          <h3>更新作者</h3>
          <input id="oldAuthorName" placeholder="原作者名">
          <input id="newAuthorName" placeholder="新作者名">
          <button onclick="updateAuthor()">更新作者</button>
        </div>

        <!-- 更新论文 -->
        <div class="form">
          <h3>更新论文</h3>
          <input id="updatePaperId" placeholder="论文ID">
          <input id="updatePaperTitle" placeholder="新论文标题">
          <textarea id="updatePaperAbstract" placeholder="新论文摘要"></textarea>
          <button onclick="updatePaper()">更新论文</button>
        </div>

        <!-- 更新分类 -->
        <div class="form">
          <h3>更新分类</h3>
          <input id="oldCategoryName" placeholder="原分类名">
          <input id="newCategoryName" placeholder="新分类名">
          <button onclick="updateCategory()">更新分类</button>
        </div>

        <pre id="modifyResult"></pre>
      </section>

      <!-- 删除模块 -->
      <section id="delete" class="page hidden">
        <h2>🗑️ 删除数据</h2>

        <!-- 删除作者 -->
        <div class="form">
          <h3>删除作者</h3>
          <input id="deleteAuthorName" placeholder="作者名">
          <button onclick="deleteAuthor()">删除作者</button>
        </div>

        <!-- 删除论文 -->
        <div class="form">
          <h3>删除论文</h3>
          <input id="deletePaperId" placeholder="论文ID">
          <button onclick="deletePaper()">删除论文</button>
        </div>

        <!-- 删除分类 -->
        <div class="form">
          <h3>删除分类</h3>
          <input id="deleteCategoryName" placeholder="分类名">
          <button onclick="deleteCategory()">删除分类</button>
        </div>

        <pre id="deleteResult"></pre>
      </section>

      <!-- 推荐模块 -->
      <section id="recommend" class="page hidden">
        <h2>📚 论文推荐</h2>

        <div class="recommendation-controls">
          <!-- 移除搜索框，因为后端不需要输入参数 -->
          <div class="info-box">
            <p>系统基于您的阅读喜好为您智能推荐论文，多点赞喜欢的论文，推荐会更加准确！</p>
          </div>

          <div class="action-buttons">
            <button onclick="getRecommendations()" class="refresh-btn action-btn">🔄 刷新推荐</button>
            <button onclick="viewLikedPapers()" class="view-liked-btn action-btn">❤️ 查看我的点赞</button>
            <button onclick="viewPopularPapers()" class="view-popular-btn action-btn">👀 大家在看</button>
          </div>
        </div>

        <div class="recommendation-results">
          <h3 id="recommendationTitle">为您推荐的论文</h3>
          <div id="recommendationList" class="papers-grid">
            <!-- 推荐论文将通过JS动态加载 -->
          </div>
        </div>

        <div id="recommendationResult" class="result-box"></div>
      </section>
  </div>
  
  <script src="js/auth.js"></script>
  <script src="js/recommendations.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
