# API测试脚本使用说明

## 测试脚本功能

`test_api.py` 是一个全面的API测试脚本，用于验证知识图谱管理系统中的作者、论文和分类实体的增删改查(CRUD)功能。脚本会:

1. **自动生成唯一测试数据**：每次运行生成唯一ID，避免数据冲突
2. **完整测试作者实体**：添加、查询、更新、删除、验证
3. **完整测试分类实体**：添加、查询、更新、删除、验证
4. **完整测试论文实体**：添加、查询、更新、删除、验证（包括与作者和分类的关联）
5. **详细输出测试结果**：显示每个操作的状态码和响应内容
6. **自动清理测试数据**：测试结束后删除所有创建的测试实体

## 使用方法

### 前提条件

1. 确保后端服务正在运行（默认端口：5000）
2. 确保已安装Python和requests库

### 安装依赖

```bash
pip install requests
```

### 运行测试

1. 确保后端服务正在运行
2. 打开命令行终端
3. 导航到脚本所在目录：
   ```bash
   cd c:/Users/jikai/Downloads/KGMS-main/ake/utils
   ```
4. 运行测试脚本：
   ```bash
   python test_api.py
   ```

## 测试脚本结构说明

1. **测试数据生成**：使用UUID生成唯一测试ID，避免与现有数据冲突
2. **API测试类**：`APITester`类封装了HTTP请求和响应处理功能
3. **测试流程**：
   - 测试作者相关功能
   - 测试分类相关功能
   - 测试论文相关功能（包括与作者、分类的关联）
   - 清理测试数据
4. **断言验证**：每个关键操作后都有断言验证，确保API按预期工作

## 测试结果解读

- ✅ 成功：操作成功完成
- ❌ 失败：操作失败，状态码和错误信息会显示
- 详细输出每个API的响应内容，便于调试

## 注意事项

1. 测试过程中会创建临时测试数据，测试结束后会自动清理
2. 如果测试过程中出现异常中断，可能需要手动清理测试数据
3. 测试脚本默认使用`http://localhost:5000/api/kg`作为API基础地址，如果后端服务运行在其他地址或端口，请修改脚本中的`API_BASE`常量

## 自定义测试

如果需要测试特定场景，可以修改脚本中的以下变量：
- `API_BASE`：API基础地址
- `TEST_ID`：测试ID前缀
- `TEST_AUTHOR_1/2`：测试作者名称
- `TEST_PAPER_ID`：测试论文ID
- `TEST_CATEGORY_1/2`：测试分类名称

或者扩展脚本添加更多测试用例。